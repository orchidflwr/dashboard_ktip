<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Pariwisita KTIP BPS</title>
    <link href="../assets/styles.css" rel="stylesheet">

    <!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/flowbite/2.2.1/flowbite.min.css" rel="stylesheet" /> -->
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
        
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.2/css/dataTables.dataTables.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/buttons/3.0.2/css/buttons.dataTables.css" />
    <link rel="stylesheet" href="https://cdn.datatables.net/fixedcolumns/5.0.0/css/fixedColumns.dataTables.css" />

    <style>
        body,
        div,
        p,
        span {
            font-family: 'Poppins';
        }

        a {
            text-decoration: underline;
        }
    </style>




</head>

<body>
    <%- include('header'); %>
        <div class="font-sans grid h-svh w-auto overflow-y-scroll gap-y-4 bg-slate-400">
            <div class="grid ml-3 mr-3" style="margin-top:4.6rem; border-radius: 20px;">
                <div class="font-semibold text-center bg-gray-700 text-white p-1 h-16"
                    style="border-radius: 20px; font-size: 2.5rem; margin-bottom:15px;">
                    <h1>Tabulasi Silang</h1>
                </div>

                <div class="grid" style="border-radius: 25px;">
                    <div class="relative shadow bg-slate-200 p-4 mr-2 h-96 overflow-y-scroll" style="border-radius: 25px;">
                        <div class="font-bold">Level Penyajian :</div>
                        <div class="pl-3">
                            <input id="levelProv" type="radio" name="level" value="kode_prov_baru" /> Provinsi <br>
                            <input id="levelKab" type="radio" name="level" value="kode_prov_baru,kode_kab_baru" />
                            Kabupaten/Kota
                        </div>
                        <br>
                        <div class="font-bold">Pilih tahun :</div>
                        <div class="pl-3">
                            <% for(let i=0;i<data.length;i++){ %>
                                <input name="tahunRadio" type="radio" value="<%=data[i].tahun%>"
                                    checked="true" />
                                <%=data[i].tahun%> <br>
                                    <%}%>
                        </div>
                        <br>
                        <div class="mb-2 flex font-bold"><span>Group By :&nbsp;&nbsp;&nbsp;</span> <select id="levelBtn"
                                class="text-left text-black bg-white border-2 border-neutral-400 font-medium text-sm px-5 py-1 inline-flex items-center outline-none focus:border-none focus:ring focus:ring-sky-300"
                                style="border-radius:20px;">
                                <option id="labelOpt" value="none" disabled selected>+ Add Level</option>
                                <option id="option1" value="jenis_akomodasi">Jenis Akomodasi</option>
                                <option id="option2" value="kelas_akomodasi">Kelas Akomodasi</option>
                            </select></div>

                        <div id="levelTab" class="flex">
                            <div>
                                <ul id="levelList">

                                </ul>
                            </div>

                        </div>
                        <br>

                        <div>
                            <p class="mb-2 font-bold">Periode Waktu :</p>
                            <div> 
                                
                                <input type="radio"  name="periode" value="12">
                                <label>Tahunan</label><br>

                                <input type="radio"  name="periode" value="1">
                                <label>Bulanan</label><br>
                                
                                <input type="radio"  name="periode" value="2">
                                <label>Dwiwulan</label><br>
                                
                                <input type="radio"  name="periode" value="3">
                                <label>Triwulan</label><br>
                
                                <input type="radio"  name="periode" value="4">
                                <label>Caturwulan</label><br>

                                <input type="radio"  name="periode" value="6">
                                <label>Semester</label><br>
                            </div>
                            
                        </div>
                        <% if(role==1){ %>
                        <span id="previewBtn" class="text-right sticky bottom-2 left-full mr-2">
                            <button id="previewBtn" class="font-bold shadow-xl bg-blue-500 text-white py-2 px-4 focus:outline-none focus:bg-blue-700 active:bg-blue-800" style="border-radius: 25px;">
                                Show Preview
                              </button>
                            </span>
                            <% }else{%>
                            
                                <span class="text-right sticky bottom-2 left-full mr-2">
                                    <button onclick="alert('Only admin can use this feature')" class="font-bold shadow-xl bg-blue-500 text-white py-2 px-4 focus:outline-none focus:bg-blue-700 active:bg-blue-800" style="border-radius: 25px;">
                                        Show Preview
                                      </button>
                                    </span>

                                <%}%>
                        


                    </div>
                    <br>
                    
                    <div id="tabCont" class="place-content-center shadow bg-slate-200 p-2 h-96 overflow-scroll" style="border-radius:25px;">
                        <div class="text-center italic font-bold text-slate-400 text-xl">Table Preview</div>
                        <div class="text-center italic text-slate-400 text-md">Silahkan pilih konfigurasi tabulasi silang</div>
                    </div>
                    
                </div>

            </div>
            <div class="grid ml-3 mr-3 mt-4" style="border-radius: 20px;">
                <div class="font-semibold text-center bg-gray-700 text-white p-1 h-16"
                style="border-radius: 20px; font-size: 2.5rem; margin-bottom:15px;">
                <h1>Unggah Data</h1>
               
            </div>
            <div class="md:flex shadow bg-slate-200 p-4 mr-2" style="border-radius: 25px;">
            <div class="md:w-2/3"> <div class="font-bold mb-2">Upload File (format: .xls, .xlsx,.csv) :</div>
            <div><select id="indTable"class="text-left text-black bg-white border-2 border-neutral-400 font-medium text-sm px-5 py-1 inline-flex items-center outline-none focus:border-none focus:ring focus:ring-sky-300"
                style="border-radius:20px;flex-grow:1;">
                <option  value="1" >Survei Tingkat Penghunian Kamar Hotel</option>
                <option  value="2">Origin Destination Matrix</option>
                <option  value="3">MPD Negara Tujuan Wisnas</option></select> <button id="formatUnggah" class="font-bold shadow-xl bg-blue-500 text-white py-2 px-4 focus:outline-none focus:bg-blue-700 active:bg-blue-800" style="border-radius: 25px;">
                Unduh Format Unggah 
              </button></div>
            <div> <input id="fileInput" type="file" accept=".csv,.xls,.xlsx" class="ml-2 mt-1 block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
            <br>
            <% if(role==1){ %>
                 <div><button id="insertBtn" class="font-bold shadow-xl bg-blue-500 text-white py-2 px-4 focus:outline-none focus:bg-blue-700 active:bg-blue-800" style="border-radius: 25px;">
                    Insert to Database 
                  </button>
                </div>
                <% }else{%>
                     <div><button  onclick="alert('Only admin can use this feature')" class="font-bold shadow-xl bg-blue-500 text-white py-2 px-4 focus:outline-none focus:bg-blue-700 active:bg-blue-800" style="border-radius: 25px;">
                        Insert to Database 
                      </button>
                    </div>
                    <%}%>
                
            <br>
            </div>
        </div>
            
            <div class="md:w-1/3">
                <div class="font-bold">Status :</div>
                <div id="statusContainer" class="bg-white h-64 p-4 overflow-y-scroll" style='border-radius: 25px; font-family: Monospace;'></div>
             </div>
            </div>
            </div>


            <div class="grid ml-3 mr-3 mt-4" style="border-radius: 20px;">
                <div class="font-semibold text-center bg-gray-700 text-white p-1 h-16"
                style="border-radius: 20px; font-size: 2.5rem; margin-bottom:15px;">
                <h1>Validitas Data</h1>
                
            </div>
            <br>
             <div class="bg-slate-200 p-4" style="border-radius: 25px;">
                <div><select id="indValid"class="text-left text-black bg-white border-2 border-neutral-400 font-medium text-sm px-5 py-1 inline-flex items-center outline-none focus:border-none focus:ring focus:ring-sky-300"
                    style="border-radius:20px;flex-grow:1;">
                    <option  value="1" >Survei Tingkat Penghunian Kamar Hotel</option>
                    <option  value="2">Origin Destination Matrix</option>
                    <option  value="3">MPD Negara Tujuan Wisnas</option></select>
                    <button id="cekValid" class="font-bold shadow-xl bg-blue-500 text-white py-2 px-4 focus:outline-none focus:bg-blue-700 active:bg-blue-800" style="border-radius: 25px;">
                        Check
                      </button>
                </div>
                <div id="valCont" class="place-content-center shadow bg-slate-200 p-2 h-96 overflow-scroll" style="border-radius:25px;">
                    
                    <div class="text-center italic font-bold text-slate-400 text-xl">No Invalid Data Found</div>
                </div>
             </div>       
           


        </div>
            <div class=""><%- include('footer'); %></div>
        </div>



        <script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.5.0/echarts.min.js"
            integrity="sha512-k37wQcV4v2h6jgYf5IUz1MoSKPpDs630XGSmCaCCOXxy2awgAWKHGZWr9nMyGgk3IOxA1NxdkN8r1JHgkUtMoQ=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
        <script src="https://cdn.datatables.net/2.0.7/js/dataTables.js"></script>
        <script type="text/javascript" src="https://cdn.datatables.net/buttons/3.0.2/js/dataTables.buttons.js"></script>
        <script src="https://cdn.datatables.net/buttons/3.0.2/js/buttons.html5.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
        <script src="https://cdn.datatables.net/fixedcolumns/5.0.0/js/dataTables.fixedColumns.js"></script>
        <script src="https://cdn.datatables.net/fixedcolumns/5.0.0/js/fixedColumns.dataTables.js"></script>
        <script src="../assets/plugin/xlsx.full.min.js"></script>
        <script src="../assets/plugin/jquery.table2excel.js"></script>
        <script type="module" src="../assets/js/tabulasi.js"></script>
</body>

</html>